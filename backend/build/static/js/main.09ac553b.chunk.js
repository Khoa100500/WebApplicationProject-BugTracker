(this["webpackJsonpbug-view"]=this["webpackJsonpbug-view"]||[]).push([[0],{64:function(e,t,s){},65:function(e,t,s){},66:function(e,t,s){},67:function(e,t,s){"use strict";s.r(t);var a=s(1),n=s.n(a),c=s(30),l=s.n(c),i=s(4),r=s(15),d=s(19),o=s(36),b=s(33),j=s.n(b),u={BACKEND:"/api",disableLogin:!1},m=s(2),h=s(35),x=function(){var e=new Date,t=e.getDate(),s=e.getMonth()+1,a=e.getFullYear(),n=e.getHours(),c=e.getMinutes(),l=e.getSeconds();return a+"-"+(s=s<10?"0"+s:s)+"-"+(t=t<10?"0"+t:t)+" "+(n=n<10?"0"+n:n)+":"+(c=c<10?"0"+c:c)+":"+(l=l<10?"0"+l:l)},O=function(e,t,s,a){return y.patch("/bugs/"+e,{updates:[].concat(Object(h.a)(a),[{time:x(),content:s,authorID:t}])})},v=function(e){return y.delete("/bugs/"+e)},f=function(e,t,s,a){return y.post("/people",{name:a,role:e,username:t,password:s}).then((function(e){return e.data}))},g=s(0),p=Object(a.createContext)(),N=function(e){var t=e.children,s=Object(a.useState)({id:void 0,role:void 0,name:void 0,username:void 0,accessToken:void 0}),n=Object(m.a)(s,2),c=n[0],l=n[1],i=Object(a.useState)([]),r=Object(m.a)(i,2),d=r[0],o=r[1],b=Object(a.useState)([]),j=Object(m.a)(b,2),u=j[0],h=j[1];Object(a.useEffect)((function(){x(),O()}),[]);var x=function(){var e,t,s;return null===(t=c.id,e="admin"===(s=c.role)?y.get("/bugs").then((function(e){return e.data})):"staff"===s?y.get("/bugs?staffID="+t).then((function(e){return e.data})):"user"===s?y.get("/bugs?userID="+t).then((function(e){return e.data})):void 0)||void 0===e?void 0:e.then((function(e){o(e)}))},O=function(){var e;return null===(e=y.get("/people").then((function(e){return e.data})))||void 0===e?void 0:e.then((function(e){h(e)}))};return Object(g.jsx)(p.Provider,{value:{user:c,setUser:l,bugList:d,peopleList:u,refreshBugList:x,refreshPeopleList:O},children:t})},y=j.a.create({baseURL:u.BACKEND}),w=function(e){y.interceptors.request.use((function(t){return t.headers={"x-access-token":e},t}))},C=function(e){var t,s=e.children,n=Object(o.a)(e,["children"]),c=Object(a.useContext)(p),l=c.user,r=c.setUser,b=c.refreshBugList,j=c.refreshPeopleList;return(null===(t=l)||void 0===t?void 0:t.accessToken)||(l=JSON.parse(localStorage.getItem("user"))),Object(g.jsx)(i.b,Object(d.a)(Object(d.a)({},n),{},{render:function(e){var t,a=e.location;return(null===(t=l)||void 0===t?void 0:t.accessToken)?(w(l.accessToken),r(l,(function(){b(),j()})),s):(alert("Unauthorized access"),Object(g.jsx)(i.a,{to:{pathname:"/login",state:{from:a}}}))}}))},S=function(){var e,t,s=Object(a.useContext)(p),n=s.user.id,c=s.peopleList,l=s.refreshBugList,i=[],r=[];c.forEach((function(e){e.id!==n&&("staff"===e.role&&r.push(e),"user"===e.role&&i.push(e))}));var d=Object(a.useState)(""),o=Object(m.a)(d,2),b=o[0],j=o[1],u=Object(a.useState)(""),h=Object(m.a)(u,2),O=h[0],v=h[1],f=Object(a.useState)(null===(e=i[0])||void 0===e?void 0:e.id),N=Object(m.a)(f,2),w=N[0],C=N[1],S=Object(a.useState)(null===(t=r[0])||void 0===t?void 0:t.id),k=Object(m.a)(S,2),I=k[0],D=k[1];return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{className:"modal fade text-dark ",id:"modalAddBug",tabIndex:"-1",children:Object(g.jsx)("div",{className:"modal-dialog",children:Object(g.jsxs)("div",{className:"modal-content",children:[Object(g.jsxs)("div",{className:"modal-header bg-primary text-light",children:[Object(g.jsx)("h5",{className:"modal-title",children:"Add new bug"}),Object(g.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal"})]}),Object(g.jsxs)("div",{className:"modal-body",children:[Object(g.jsxs)("div",{className:"form-floating mb-3",children:[Object(g.jsx)("input",{type:"text",className:"form-control",id:"title",value:b,onChange:function(e){j(e.target.value)}}),Object(g.jsx)("label",{htmlFor:"title",children:"Title"})]}),Object(g.jsxs)("div",{className:"form-floating mb-3",children:[Object(g.jsx)("textarea",{className:"form-control",id:"description",style:{height:"100px"},value:O,onChange:function(e){v(e.target.value)}}),Object(g.jsx)("label",{htmlFor:"description",children:"Description"})]}),Object(g.jsxs)("div",{className:"form-floating mb-3",children:[Object(g.jsx)("select",{className:"form-select",id:"selectUser",style:{height:"65px"},value:w,onChange:function(e){C(e.target.value)},children:i.map((function(e){return Object(g.jsx)("option",{value:e.id,children:"[".concat(e.username,"] ").concat(e.name)},e.id)}))}),Object(g.jsx)("label",{htmlFor:"selectUser",children:"Select user"})]}),Object(g.jsxs)("div",{className:"form-floating mb-3",children:[Object(g.jsx)("select",{className:"form-select",id:"selectStaff",style:{height:"65px"},value:I,onChange:function(e){D(e.target.value)},children:r.map((function(e){return Object(g.jsx)("option",{value:e.id,children:"[".concat(e.username,"] ").concat(e.name)},e.id)}))}),Object(g.jsx)("label",{htmlFor:"selectStaff",children:"Select staff"})]})]}),Object(g.jsxs)("div",{className:"modal-footer",children:[Object(g.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Cancel"}),Object(g.jsx)("button",{type:"button",className:"btn btn-primary","data-bs-dismiss":"modal",onClick:function(e){(function(e,t,s,a,n,c){return y.post("/bugs",{title:t,description:s,userID:a,staffID:n,updates:[{time:x(),content:"Bug created and assigned to @"+c,authorID:e}]})})(n,b,O,w,I,r.find((function(e){return e.id===I})).username).then((function(){l()}))},children:"Submit"})]})]})})}),Object(g.jsx)("button",{className:"btn btn-outline-light","data-bs-toggle":"modal","data-bs-target":"#modalAddBug",onClick:function(){var e,t;j(""),v(""),C(null===(e=i[0])||void 0===e?void 0:e.id),D(null===(t=r[0])||void 0===t?void 0:t.id)},children:"+"})]})},k=(s(64),function(e){var t=e.selectedBugID,s=e.setSelectedBugID,n=Object(a.useContext)(p),c=n.user.role,l=n.bugList;return Object(g.jsxs)("div",{className:"card bg-primary text-white",children:[Object(g.jsxs)("div",{className:"card-header d-flex justify-content-between align-items-end",children:[Object(g.jsx)("h5",{children:"Bug list"}),"admin"===c&&Object(g.jsx)(S,{})]}),Object(g.jsx)("ul",{className:"list-group list-group-flush",children:l.map((function(e){return Object(g.jsx)("li",{className:"list-group-item user-select-none list-group-item-action"+(e.id===t?" active":""),onClick:function(){return s(e.id)},children:e.title},e.id)}))})]})}),I=function(e){var t=e.bug,s=Object(a.useContext)(p),n=s.user.id,c=s.refreshBugList,l=Object(a.useState)(""),i=Object(m.a)(l,2),r=i[0],d=i[1];return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("button",{className:"btn btn-outline-light","data-bs-toggle":"modal","data-bs-target":"#modalUpdateBug",onClick:function(){d("")},children:"Update"}),Object(g.jsx)("div",{className:"modal fade text-dark",id:"modalUpdateBug",tabIndex:"-1",children:Object(g.jsx)("div",{className:"modal-dialog",children:Object(g.jsxs)("div",{className:"modal-content",children:[Object(g.jsxs)("div",{className:"modal-header bg-primary text-light",children:[Object(g.jsx)("h5",{className:"modal-title",children:"Update bug"}),Object(g.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal"})]}),Object(g.jsx)("div",{className:"modal-body",children:Object(g.jsxs)("div",{className:"form-floating mb-3",children:[Object(g.jsx)("textarea",{className:"form-control",id:"content",style:{height:"100px"},value:r,onChange:function(e){d(e.target.value)}}),Object(g.jsx)("label",{htmlFor:"content",children:"Update content"})]})}),Object(g.jsxs)("div",{className:"modal-footer",children:[Object(g.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Cancel"}),Object(g.jsx)("button",{type:"button",className:"btn btn-primary","data-bs-dismiss":"modal",onClick:function(e){O(t.id,n,r,t.updates).then((function(){c()}))},children:"Submit"})]})]})})})]})},D=function(e){var t,s=e.bug,n=Object(a.useContext)(p),c=n.user.id,l=n.peopleList,i=n.refreshBugList,r=l.filter((function(e){return e.id!==(null===s||void 0===s?void 0:s.staffID)&&"staff"===e.role})),d=Object(a.useState)(null===(t=r[0])||void 0===t?void 0:t.id),o=Object(m.a)(d,2),b=o[0],j=o[1];return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{className:"modal fade text-dark",id:"modalForwardBug",tabIndex:"-1",children:Object(g.jsx)("div",{className:"modal-dialog",children:Object(g.jsxs)("div",{className:"modal-content",children:[Object(g.jsxs)("div",{className:"modal-header bg-primary text-light",children:[Object(g.jsx)("h5",{className:"modal-title",children:"Forward bug"}),Object(g.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal"})]}),Object(g.jsx)("div",{className:"modal-body",children:Object(g.jsxs)("div",{className:"form-floating mb-3",children:[Object(g.jsx)("select",{className:"form-select",id:"selectStaff",style:{height:"65px"},value:b,onChange:function(e){j(e.target.value)},children:r.map((function(e){return Object(g.jsx)("option",{value:e.id,children:"[".concat(e.username,"] ").concat(e.name)},e.id)}))}),Object(g.jsx)("label",{htmlFor:"selectStaff",children:"Forward to staff"})]})}),Object(g.jsxs)("div",{className:"modal-footer",children:[Object(g.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Cancel"}),Object(g.jsx)("button",{type:"button",className:"btn btn-primary","data-bs-dismiss":"modal",onClick:function(){var e,t,a,n,l;(e=s.id,t=c,a=b,n=s.updates,l=r.filter((function(e){return e.id===b}))[0].username,y.patch("/bugs/"+e,{staffID:a}).then((function(){return O(e,t,"Bug is forwarded to @"+l,n)}))).then((function(){i()}))},children:"Forward"})]})]})})}),Object(g.jsx)("button",{className:"btn btn-outline-light","data-bs-toggle":"modal","data-bs-target":"#modalForwardBug",onClick:function(){j(r[0].id)},children:"Forward"})]})},F=function(e){var t=e.bug,s=Object(a.useContext)(p).refreshBugList;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{className:"modal fade text-dark",id:"modalKillBug",tabIndex:"-1",children:Object(g.jsx)("div",{className:"modal-dialog",children:Object(g.jsxs)("div",{className:"modal-content",children:[Object(g.jsxs)("div",{className:"modal-header bg-primary text-light",children:[Object(g.jsx)("h5",{className:"modal-title",children:"Kill bug"}),Object(g.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal"})]}),Object(g.jsx)("div",{className:"modal-body",children:"Do you really want to kill this innocent bug?"}),Object(g.jsxs)("div",{className:"modal-footer",children:[Object(g.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Cancel"}),Object(g.jsx)("button",{type:"button",className:"btn btn-primary","data-bs-dismiss":"modal",onClick:function(e){e.preventDefault(),v(t.id).then((function(){s()}))},children:"Submit"})]})]})})}),Object(g.jsx)("button",{className:"btn btn-outline-light","data-bs-toggle":"modal","data-bs-target":"#modalKillBug",children:"Kill"})]})},L=function(e){var t=e.selectedBugID,s=Object(a.useContext)(p),n=s.user.role,c=s.peopleList,l=s.bugList,i=[],r=[];c.forEach((function(e){"staff"===e.role&&r.push(e),"user"===e.role&&i.push(e)}));var d=l.find((function(e){return e.id===t})),o=i.find((function(e){return e.id===(null===d||void 0===d?void 0:d.userID)})),b=r.find((function(e){return e.id===(null===d||void 0===d?void 0:d.staffID)}));return Object(g.jsxs)("div",{className:"card bg-primary text-light",children:[Object(g.jsxs)("div",{className:"card-header d-flex justify-content-between align-items-end",children:[Object(g.jsx)("h5",{children:"Bug detail"}),Object(g.jsxs)("div",{className:"btn-group ",children:[d&&["admin","staff"].includes(n)&&Object(g.jsx)(I,{bug:d}),d&&["admin","staff"].includes(n)&&Object(g.jsx)(D,{bug:d}),d&&["admin","user"].includes(n)&&Object(g.jsx)(F,{bug:d})]})]}),Object(g.jsxs)("div",{className:"card-body bg-white text-dark",children:[Object(g.jsxs)("div",{className:"row mb-2 align-items-center",children:[Object(g.jsx)("label",{className:"col-2",htmlFor:"titledetail",children:Object(g.jsx)("strong",{children:"Title"})}),Object(g.jsx)("div",{className:"col-10",children:Object(g.jsx)("input",{readOnly:!0,type:"text",id:"titledetail",className:"form-control",value:null===d||void 0===d?void 0:d.title})})]}),Object(g.jsxs)("div",{className:"row mb-2 align-items-start",children:[Object(g.jsx)("label",{className:"col-2",htmlFor:"describe"}),Object(g.jsx)("div",{className:"col-10",children:Object(g.jsx)("textarea",{readOnly:!0,type:"text",id:"describe",className:"form-control",style:{height:"100px"},value:null===d||void 0===d?void 0:d.description})})]}),Object(g.jsxs)("div",{className:"row mb-2 align-items-center",children:[Object(g.jsx)("label",{className:"col-2",htmlFor:"userdetail",children:Object(g.jsx)("strong",{children:"User"})}),Object(g.jsx)("div",{className:"col-10",children:Object(g.jsxs)("div",{className:"input-group",children:[Object(g.jsxs)("span",{className:"input-group-text",children:["@",null===o||void 0===o?void 0:o.username]}),Object(g.jsx)("input",{readOnly:!0,type:"text",id:"userdetail",className:"form-control",value:null===o||void 0===o?void 0:o.name})]})})]}),Object(g.jsxs)("div",{className:"row mb-2 align-items-center",children:[Object(g.jsx)("label",{className:"col-2",htmlFor:"staffdetail",children:Object(g.jsx)("strong",{children:"Staff"})}),Object(g.jsx)("div",{className:"col-10",children:Object(g.jsxs)("div",{className:"input-group",children:[Object(g.jsxs)("span",{className:"input-group-text",children:["@",null===b||void 0===b?void 0:b.username]}),Object(g.jsx)("input",{readOnly:!0,type:"text",id:"staffdetail",className:"form-control",value:null===b||void 0===b?void 0:b.name})]})})]})]}),Object(g.jsx)("ul",{className:"list-group list-group-flush",children:null===d||void 0===d?void 0:d.updates.map((function(e,t){var s,a,n,l=e.time,i=e.content,r=e.authorID;return Object(g.jsx)("li",{className:"list-group-item",children:Object(g.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(g.jsxs)("div",{children:[Object(g.jsx)("strong",{children:(n=l,n.slice(0,19).replace("T"," "))})," "+i]}),Object(g.jsxs)("div",{className:"text-primary",children:[Object(g.jsx)("em",{children:"@"}),null!==(s=null===(a=c.find((function(e){return e.id===r})))||void 0===a?void 0:a.username)&&void 0!==s?s:"[deleted]"]})]})},t)}))})]})},B=function(){var e=Object(a.useState)(),t=Object(m.a)(e,2),s=t[0],n=t[1],c=Object(a.useContext)(p),l=c.refreshBugList,i=c.refreshPeopleList;return Object(a.useEffect)((function(){l(),i()}),[]),Object(g.jsx)("div",{className:"container pt-3",children:Object(g.jsxs)("div",{className:"row",children:[Object(g.jsx)("div",{className:"col-sm-4",children:Object(g.jsx)(k,{selectedBugID:s,setSelectedBugID:n})}),Object(g.jsx)("div",{className:"col-sm-8",children:Object(g.jsx)(L,{selectedBugID:s})})]})})},P=s(10),U=function(){var e=Object(a.useContext)(p),t=e.user,s=t.name,n=t.role,c=e.setUser,l=Object(i.g)();return Object(g.jsx)("nav",{className:"navbar navbar-expand-sm navbar-dark bg-primary",children:Object(g.jsxs)("div",{className:"container-fluid",children:[Object(g.jsx)("a",{className:"navbar-brand",href:"#",children:"Group 5 [BugTracker]"}),Object(g.jsxs)("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0",children:[["admin","staff","user"].includes(n)&&Object(g.jsx)("li",{className:"nav-item",children:Object(g.jsx)(P.b,{activeClassName:"active",className:"nav-link",to:"/bugview",children:"Manage Bugs"})}),["admin"].includes(n)&&Object(g.jsx)("li",{className:"nav-item",children:Object(g.jsx)(P.b,{activeClassName:"active",className:"nav-link",to:"/projectview",children:"Manage Project"})})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("span",{className:"navbar-text",children:"Logged in as"}),Object(g.jsx)("span",{className:"text-light m-2",children:null===s||void 0===s?void 0:s.toUpperCase()}),Object(g.jsx)("button",{className:"btn btn-outline-light",onClick:function(e){e.preventDefault(),localStorage.removeItem("user"),c({id:void 0,role:void 0,name:void 0,username:void 0,accessToken:void 0}),l.push("/login")},children:"Logout"})]})]})})},T=function(){var e=Object(a.useContext)(p).refreshPeopleList,t=Object(a.useState)(""),s=Object(m.a)(t,2),n=s[0],c=s[1],l=Object(a.useState)(""),i=Object(m.a)(l,2),r=i[0],d=i[1],o=Object(a.useState)(""),b=Object(m.a)(o,2),j=b[0],u=b[1];return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{className:"modal fade text-dark ",id:"modalAddStaff",tabIndex:"-1",children:Object(g.jsx)("div",{className:"modal-dialog",children:Object(g.jsxs)("div",{className:"modal-content",children:[Object(g.jsxs)("div",{className:"modal-header bg-primary text-light",children:[Object(g.jsx)("h5",{className:"modal-title",children:"Add new staff"}),Object(g.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal"})]}),Object(g.jsxs)("div",{className:"modal-body",children:[Object(g.jsxs)("div",{className:"form-floating mb-3",children:[Object(g.jsx)("input",{type:"text",className:"form-control",id:"namestaff",value:n,onChange:function(e){c(e.target.value)}}),Object(g.jsx)("label",{htmlFor:"namestaff",children:"Full name"})]}),Object(g.jsxs)("div",{className:"form-floating mb-3",children:[Object(g.jsx)("input",{type:"text",className:"form-control",id:"username",value:r,onChange:function(e){d(e.target.value)}}),Object(g.jsx)("label",{htmlFor:"username",children:"Username"})]}),Object(g.jsxs)("div",{className:"form-floating mb-3",children:[Object(g.jsx)("input",{type:"password",className:"form-control",id:"password",value:j,onChange:function(e){u(e.target.value)}}),Object(g.jsx)("label",{htmlFor:"password",children:"Password"})]})]}),Object(g.jsxs)("div",{className:"modal-footer",children:[Object(g.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Cancel"}),Object(g.jsx)("button",{type:"button",className:"btn btn-primary","data-bs-dismiss":"modal",onClick:function(t){(function(e,t,s){return f("staff",e,t,s)})(r,j,n).then((function(){e()}))},children:"Submit"})]})]})})}),Object(g.jsx)("button",{className:"btn btn-outline-light","data-bs-toggle":"modal","data-bs-target":"#modalAddStaff",onClick:function(){c(""),d(""),u("")},children:"+"})]})},E=(s(65),function(e){var t=e.selectedPersonID,s=e.setSelectedPersonID,n=Object(a.useContext)(p).peopleList.filter((function(e){return"staff"===e.role}));return Object(g.jsxs)("div",{className:"card bg-primary text-white",children:[Object(g.jsxs)("div",{className:"card-header d-flex justify-content-between align-items-end",children:[Object(g.jsx)("h5",{children:"Staff list"}),Object(g.jsx)(T,{})]}),Object(g.jsx)("ul",{className:"list-group list-group-flush",children:n.map((function(e){return Object(g.jsxs)("li",{className:"list-group-item user-select-none list-group-item-action"+(e.id===t?" active":""),onClick:function(){return s(e.id)},children:[Object(g.jsxs)("strong",{children:["@",e.username]})," "+e.name]},e.id)}))})]})}),A=function(e){var t=e.person,s=Object(a.useContext)(p).refreshPeopleList,n=Object(a.useState)(null===t||void 0===t?void 0:t.name),c=Object(m.a)(n,2),l=c[0],i=c[1],r=Object(a.useState)(null===t||void 0===t?void 0:t.username),d=Object(m.a)(r,2),o=d[0],b=d[1],j=Object(a.useState)(null===t||void 0===t?void 0:t.password),u=Object(m.a)(j,2),h=u[0],x=u[1];return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("button",{className:"btn btn-outline-light","data-bs-toggle":"modal","data-bs-target":"#modalEditPerson",onClick:function(){i(null===t||void 0===t?void 0:t.name),b(null===t||void 0===t?void 0:t.username),x(null===t||void 0===t?void 0:t.password)},children:"Edit"}),Object(g.jsx)("div",{className:"modal fade text-dark ",id:"modalEditPerson",tabIndex:"-1",children:Object(g.jsx)("div",{className:"modal-dialog",children:Object(g.jsxs)("div",{className:"modal-content",children:[Object(g.jsxs)("div",{className:"modal-header bg-primary text-light",children:[Object(g.jsxs)("h5",{className:"modal-title",children:["Edit ",null===t||void 0===t?void 0:t.role]}),Object(g.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal"})]}),Object(g.jsxs)("div",{className:"modal-body",children:[Object(g.jsxs)("div",{className:"form-floating mb-3",children:[Object(g.jsx)("input",{type:"text",className:"form-control",id:"nameuseredit",value:l,placeholder:null===t||void 0===t?void 0:t.name,onChange:function(e){i(e.target.value)}}),Object(g.jsx)("label",{htmlFor:"nameuseredit",children:"Full name"})]}),Object(g.jsxs)("div",{className:"form-floating mb-3",children:[Object(g.jsx)("input",{type:"text",className:"form-control",id:"usernameedit",value:o,placeholder:null===t||void 0===t?void 0:t.username,onChange:function(e){b(e.target.value)}}),Object(g.jsx)("label",{htmlFor:"usernameedit",children:"Username"})]}),Object(g.jsxs)("div",{className:"form-floating mb-3",children:[Object(g.jsx)("input",{type:"password",className:"form-control",id:"passwordedit",value:h,placeholder:null===t||void 0===t?void 0:t.password,onChange:function(e){x(e.target.value)}}),Object(g.jsx)("label",{htmlFor:"passwordedit",children:"Password"})]})]}),Object(g.jsxs)("div",{className:"modal-footer",children:[Object(g.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Cancel"}),Object(g.jsx)("button",{type:"button",className:"btn btn-primary","data-bs-dismiss":"modal",onClick:function(e){e.preventDefault(),function(e,t,s,a,n){return y.patch("/people/"+e,{name:t,role:s,username:a,password:n})}(t.id,l,t.role,o,h).then((function(){s()}))},children:"Submit"})]})]})})})]})},J=function(e){var t=e.person,s=e.bugList,n=Object(a.useContext)(p),c=n.refreshPeopleList,l=n.refreshBugList;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{className:"modal fade text-dark",id:"modalDeletePerson",tabIndex:"-1",children:Object(g.jsx)("div",{className:"modal-dialog",children:Object(g.jsxs)("div",{className:"modal-content",children:[Object(g.jsxs)("div",{className:"modal-header bg-primary text-light",children:[Object(g.jsxs)("h5",{className:"modal-title",children:["Remove this ",null===t||void 0===t?void 0:t.role]}),Object(g.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal"})]}),Object(g.jsxs)("div",{className:"modal-body",children:["Do you really want to remove ",null===t||void 0===t?void 0:t.role," ",null===t||void 0===t?void 0:t.name,"?",Object(g.jsx)("br",{})," Innocent bugs involved with this ",null===t||void 0===t?void 0:t.role," will be killed!"]}),Object(g.jsxs)("div",{className:"modal-footer",children:[Object(g.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Cancel"}),Object(g.jsx)("button",{type:"button",className:"btn btn-primary","data-bs-dismiss":"modal",onClick:function(e){e.preventDefault(),function(e,t){var s=t.map((function(e){return v(e.id)}));return Promise.all(s).then((function(){return y.delete("/people/"+e)}))}(t.id,s).then((function(){c()})).then((function(){l()}))},children:"Remove"})]})]})})}),Object(g.jsx)("button",{className:"btn btn-outline-light","data-bs-toggle":"modal","data-bs-target":"#modalDeletePerson",children:"Remove"})]})},K=function(e){var t=e.selectedPersonID,s=Object(a.useContext)(p),n=s.peopleList,c=s.bugList,l=n.find((function(e){return e.id===t})),i=c.filter((function(e){return e.staffID===t||e.userID===t}));return Object(g.jsxs)("div",{className:"card bg-primary text-light",children:[Object(g.jsxs)("div",{className:"card-header d-flex justify-content-between align-items-end",children:[Object(g.jsxs)("h5",{children:["Detail ",null===l||void 0===l?void 0:l.role]}),Object(g.jsxs)("div",{className:"btn-group ",children:[l&&Object(g.jsx)(A,{person:l}),l&&Object(g.jsx)(J,{person:l,bugList:i})]})]}),Object(g.jsx)("div",{className:"card-body bg-white text-dark",children:Object(g.jsxs)("div",{className:"row mb-2 align-items-center",children:[Object(g.jsx)("label",{className:"col-2",htmlFor:"titledetail",children:Object(g.jsx)("strong",{children:"Name"})}),Object(g.jsx)("div",{className:"col-10",children:Object(g.jsxs)("div",{className:"input-group",children:[Object(g.jsxs)("span",{className:"input-group-text",children:["@",null===l||void 0===l?void 0:l.username]}),Object(g.jsx)("input",{readOnly:!0,type:"text",id:"userdetail",className:"form-control",value:null===l||void 0===l?void 0:l.name})]})})]})}),Object(g.jsx)("ul",{className:"list-group list-group-flush",children:null===i||void 0===i?void 0:i.map((function(e){var t,s,a=e.id,c=e.userID,i=e.staffID,r=e.title;return Object(g.jsx)("li",{className:"list-group-item",children:Object(g.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(g.jsx)("div",{children:r}),Object(g.jsxs)("div",{className:"text-primary",children:[Object(g.jsx)("em",{children:"@"}),"user"===(null===l||void 0===l?void 0:l.role)?null===(t=n.find((function(e){return(null===e||void 0===e?void 0:e.id)===i})))||void 0===t?void 0:t.username:null===(s=n.find((function(e){return(null===e||void 0===e?void 0:e.id)===c})))||void 0===s?void 0:s.username]})]})},a)}))})]})},M=function(){var e=Object(a.useContext)(p).refreshPeopleList,t=Object(a.useState)(""),s=Object(m.a)(t,2),n=s[0],c=s[1],l=Object(a.useState)(""),i=Object(m.a)(l,2),r=i[0],d=i[1],o=Object(a.useState)(""),b=Object(m.a)(o,2),j=b[0],u=b[1];return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{className:"modal fade text-dark ",id:"modalAddUser",tabIndex:"-1",children:Object(g.jsx)("div",{className:"modal-dialog",children:Object(g.jsxs)("div",{className:"modal-content",children:[Object(g.jsxs)("div",{className:"modal-header bg-primary text-light",children:[Object(g.jsx)("h5",{className:"modal-title",children:"Add new user"}),Object(g.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal"})]}),Object(g.jsxs)("div",{className:"modal-body",children:[Object(g.jsxs)("div",{className:"form-floating mb-3",children:[Object(g.jsx)("input",{type:"text",className:"form-control",id:"nameuser",value:n,onChange:function(e){c(e.target.value)}}),Object(g.jsx)("label",{htmlFor:"nameuser",children:"Full name"})]}),Object(g.jsxs)("div",{className:"form-floating mb-3",children:[Object(g.jsx)("input",{type:"text",className:"form-control",id:"username",value:r,onChange:function(e){d(e.target.value)}}),Object(g.jsx)("label",{htmlFor:"username",children:"Username"})]}),Object(g.jsxs)("div",{className:"form-floating mb-3",children:[Object(g.jsx)("input",{type:"password",className:"form-control",id:"password",value:j,onChange:function(e){u(e.target.value)}}),Object(g.jsx)("label",{htmlFor:"password",children:"Password"})]})]}),Object(g.jsxs)("div",{className:"modal-footer",children:[Object(g.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Cancel"}),Object(g.jsx)("button",{type:"button",className:"btn btn-primary","data-bs-dismiss":"modal",onClick:function(t){(function(e,t,s){return f("user",e,t,s)})(r,j,n).then((function(){e()}))},children:"Submit"})]})]})})}),Object(g.jsx)("button",{className:"btn btn-outline-light","data-bs-toggle":"modal","data-bs-target":"#modalAddUser",onClick:function(){c(""),d(""),u("")},children:"+"})]})},R=(s(66),function(e){var t=e.selectedPersonID,s=e.setSelectedPersonID,n=Object(a.useContext)(p).peopleList.filter((function(e){return"user"===e.role}));return Object(g.jsxs)("div",{className:"card bg-primary text-white",children:[Object(g.jsxs)("div",{className:"card-header d-flex justify-content-between align-items-end",children:[Object(g.jsx)("h5",{children:"User list"}),Object(g.jsx)(M,{})]}),Object(g.jsx)("ul",{className:"list-group list-group-flush",children:n.map((function(e){return Object(g.jsxs)("li",{className:"list-group-item user-select-none list-group-item-action"+(e.id===t?" active":""),onClick:function(){return s(e.id)},children:[Object(g.jsxs)("strong",{children:["@",e.username]})," "+e.name]},e.id)}))})]})}),V=function(){var e=Object(a.useState)(),t=Object(m.a)(e,2),s=t[0],n=t[1];return Object(g.jsx)("div",{className:"container pt-3",children:Object(g.jsxs)("div",{className:"row",children:[Object(g.jsx)("div",{className:"col-sm-3",children:Object(g.jsx)(R,{selectedPersonID:s,setSelectedPersonID:n})}),Object(g.jsx)("div",{className:"col-sm-3",children:Object(g.jsx)(E,{selectedPersonID:s,setSelectedPersonID:n})}),Object(g.jsx)("div",{className:"col-sm-6",children:Object(g.jsx)(K,{selectedPersonID:s})})]})})},q=function(){var e=Object(a.useContext)(p),t=(e.user,e.setUser),s=(e.refreshBugList,e.refreshPeopleList,Object(a.useState)("")),n=Object(m.a)(s,2),c=n[0],l=n[1],r=Object(a.useState)(""),d=Object(m.a)(r,2),o=d[0],b=d[1],j=Object(a.useState)(!1),h=Object(m.a)(j,2),x=h[0],O=h[1],v=Object(i.g)(),f=function(){v.push("/bugview")};return Object(g.jsx)("div",{className:"container pt-5",children:Object(g.jsxs)("form",{className:"card border-primary mx-auto",style:{width:"350px"},children:[Object(g.jsx)("h3",{className:"card-header text-center text-white bg-primary",children:"Login"}),Object(g.jsxs)("div",{className:"card-body",children:[Object(g.jsxs)("div",{className:"mb-3",children:[Object(g.jsx)("label",{className:"form-label",children:"Username"}),Object(g.jsx)("input",{type:"text",className:"form-control",placeholder:"Enter Username",value:c,onChange:function(e){return l(e.target.value)}})]}),Object(g.jsxs)("div",{className:"mb-3",children:[Object(g.jsx)("label",{className:"form-label",children:"Password"}),Object(g.jsx)("input",{type:"password",className:"form-control",placeholder:"Enter password",value:o,onChange:function(e){return b(e.target.value)}})]}),Object(g.jsxs)("button",{type:"submit",className:"btn btn-primary",onClick:function(e){if(e.preventDefault(),O(!0),u.disableLogin){var s={id:"0",role:"admin",name:"The Master",username:"master",accessToken:"myaccesstoken"};t(s),localStorage.setItem("user",JSON.stringify(s)),f()}else(function(e,t){return y.post("/login",{username:e,password:t}).then((function(e){return e.data.accessToken&&(localStorage.setItem("user",JSON.stringify(e.data)),w(e.data.accessToken)),e.data}))})(c,o).then((function(e){O(!1),t(e),f()})).catch((function(e){O(!1),l(""),b(""),alert("Failed to login: ".concat(e))}))},children:["Submit"," ",x&&Object(g.jsx)("span",{className:"spinner-border spinner-border-sm"})]})]})]})})};var z=function(){var e=Object(a.useContext)(p).setUser;return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)(i.d,{children:[Object(g.jsxs)(C,{path:"/bugview",children:[Object(g.jsx)(U,{}),Object(g.jsx)(r.a,{children:Object(g.jsx)("title",{children:"BugView"})}),Object(g.jsx)(B,{})]}),Object(g.jsxs)(C,{path:"/projectview",children:[Object(g.jsx)(U,{}),Object(g.jsx)(r.a,{children:Object(g.jsx)("title",{children:"Project View"})}),Object(g.jsx)(V,{})]}),Object(g.jsx)(i.b,{path:"/login",render:function(t){var s=t.location,a=JSON.parse(localStorage.getItem("user"));return a&&a.accessToken?(w(a.accessToken),e(a),Object(g.jsx)(i.a,{to:{pathname:"/bugview",state:{from:s}}})):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(r.a,{children:Object(g.jsx)("title",{children:"Log In"})}),Object(g.jsx)(q,{})]})}}),Object(g.jsx)(i.b,{path:"/",children:Object(g.jsx)(i.a,{to:"/login"})})]})})};l.a.render(Object(g.jsx)(n.a.StrictMode,{children:Object(g.jsx)(P.a,{children:Object(g.jsx)(N,{children:Object(g.jsx)(z,{})})})}),document.getElementById("root"))}},[[67,1,2]]]);
//# sourceMappingURL=main.09ac553b.chunk.js.map